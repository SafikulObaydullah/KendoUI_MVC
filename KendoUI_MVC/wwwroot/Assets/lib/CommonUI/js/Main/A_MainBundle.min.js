function AddPrefix(n,t){var r=0,i="",u="",f=!1,e=t;t=t.toString();switch(n){case 1:u="Job Code";i="J";f=t.toUpperCase().includes(i);r=10;break;case 2:u="Cost Sheet";i="CST";f=t.toUpperCase().includes(i);r=8;break;case 3:u="Purchase Requisition";i="PR";f=t.toUpperCase().includes(i);r=6;break;case 4:u="Fabric Booking";i="FB";f=t.toUpperCase().includes(i);r=6;break;case 5:u="Block Order";i="BL";f=t.toUpperCase().includes(i);r=7;break;case 6:u="Yarn Booking";i="BK";f=t.toUpperCase().includes(i);r=8;break;case 7:u="Accessories Booking";i="BK";f=t.toUpperCase().includes(i);r=8;break;case 8:u="Buyer Order";i="B";f=t.toUpperCase().includes(i);r=7;break;default:u="Type Not Found";i="";r=0}return f||(t=addZeros(t,r),e=i+t),e}function addZeros(n,t){return n=n.toString(),n.length<t?addZeros("0"+n,t):n}function loadBModal(){$("#PassChange").click(function(){$("#mdlpasschange").modal("toggle")});$("#module").click(function(){$("#mdlmodule").modal("toggle")});$("#RefTracker").click(function(){$("#mdlReference").modal("toggle")});$("#tin").click(function(){$("#mdltin").modal("toggle")})}function loadDropdown(){$(".Kdropdown").kendoDropDownList({placeholder:"No Data..."})}function loadTextbox(){$(".textbox").kendoTextBox({});$(".Kdatepicker").kendoDatePicker()}function btnChangePassword(){var u=$("#spnEmpID").html(),f=$("#spnEmpName").html(),t,n,i,r;if($("#txtOldPassword").val()==""){popupNotification.show("Please Provide Old Password","warning");return}if(t=$("#txtOldPassword").val(),$("#txtNewPassword").val()==""){popupNotification.show("Please Provide New Password","warning");return}if(n=$("#txtNewPassword").val(),$("#txtConfirmPassword").val()==""){popupNotification.show("Please Provide Confirm Password","warning");return}if(i=$("#txtConfirmPassword").val(),n==t){popupNotification.show("New Password & old Password are same","warning");return}return n==i&&(r={currentPassword:t,newPassword:n},$.ajax({url:bUrl+"/ExternalModuleCall/ChangePassword",type:"POST",dataType:"json",data:JSON.stringify(r),contentType:"application/json",success:function(n){var t=JSON.parse(n);console.log(t);t=="Password Changed Successfully"?(popupNotification.show(t,"success"),location.reload()):popupNotification.show(t,"error")},error:function(){popupNotification.show("An error has occurred while loading module","error")}})),!0}function clearPassChange(){$("#txtOldPassword").val("");$("#txtNewPassword").val("");$("#txtConfirmPassword").val("")}function unblockUI(){var n=$("#Loadwindow").data("kendoWindow").center().open();$("#Loadwindow").parent().find(".k-window-action").css("visibility","hidden");setTimeout(function(){n.close()});$("#mdlReference").modal("show");$("#body").removeClass("blur");kendo.ui.progress(windowWidget.element,!1)}function blockUI(){var n=$("#Loadwindow").data("kendoWindow").center().open();$("#Loadwindow").parent().find(".k-window-action").css("visibility","hidden");setTimeout(function(){n.open()});$("#mdlReference").modal("hide");$("#body").addClass("blur");kendo.ui.progress(windowWidget.element,!0)}function loadLinks(){var n=getCookie("LogInInfo");$("#dirdkpi").attr("href","/DIRDKPI/"+n);$("#batchPlanning").attr("href","/Planning/"+n);$("#dashboard").attr("href","/Dashboard/"+n);$("#production").attr("href","/Production/UI/"+n)}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function CallTMSModule(){var n=getCookie("LogInInfo"),t=n.split("true&"),i=TMSUrl+t[1];window.open(i,"_blank")}function RefTracking(){var r,u;$(".status").attr("disabled",!0);var n={job_code:"",cost_sheet_code:"",PR_no:"",fb_code:"",block_code:"",yarn_booking:"",accessories_booking:"",buyer_order_code:"",po_no:""},i=parseInt($("input[name=rbdStatus]:checked").val()),t=!0;switch(i){case 1:$("#txtjobNo").attr("disabled",!1).focus();$("#txtjobNo").val()==""?(t=!1,popupNotification.show("Please provide job no","warning")):r=$("#txtjobNo").val();u=AddPrefix(1,r);$("#txtjobNo").val(u);n.job_code=$("#txtjobNo").val();break;case 2:$("#txtCSTNo").attr("disabled",!1).focus();$("#txtCSTNo").val()==""?(t=!1,popupNotification.show("Please provide cost Sheet No","warning")):n.cost_sheet_code=AddPrefix(i,$("#txtCSTNo").val());break;case 3:$("#txtPR").attr("disabled",!1).focus();$("#txtPR").val()==""?(t=!1,popupNotification.show("Please provide Purchase requisition no","warning")):n.po_no=AddPrefix(i,$("#txtPR").val());break;case 4:$("#txtFB").attr("disabled",!1).focus();$("#txtFB").val()==""?(t=!1,popupNotification.show("Please provide fabric booking no","warning")):n.fb_code=AddPrefix(i,$("#txtFB").val());break;case 5:$("#txtBlock").attr("disabled",!1).focus();$("#txtBlock").val()==""?(t=!1,popupNotification.show("Please provide block no","warning")):n.block_code=AddPrefix(i,$("#txtBlock").val());break;case 6:$("#txtYarnBK").attr("disabled",!1).focus();$("#txtYarnBK").val()==""?(t=!1,popupNotification.show("Please provide yarn booking no","warning")):n.yarn_booking=AddPrefix(i,$("#txtYarnBK").val());break;case 7:$("#txtAcsrBK").attr("disabled",!1).focus();$("#txtAcsrBK").val()==""?(t=!1,popupNotification.show("Please provide accessories booking no","warning")):n.accessories_booking=AddPrefix(i,$("#txtAcsrBK").val());break;case 8:$("#txtOrder").attr("disabled",!1).focus();$("#txtOrder").val()==""?(t=!1,popupNotification.show("Please provide Order no","warning")):n.buyer_order_code=AddPrefix(i,$("#txtOrder").val());break;case 9:$("#txtPO").attr("disabled",!1).focus();$("#txtPO").val()==""?(t=!1,popupNotification.show("Please provide PO no","warning")):n.po_no=$("#txtPO").val();break;default:n={};t=!1}return t&&(blockUI(),$.ajax({url:bUrl+"/ExternalModuleCall/RefTracking",type:"POST",dataType:"json",data:JSON.stringify(n),contentType:"application/json",success:function(n){unblockUI();var t=JSON.parse(n),i=_.without(_.values(t),null);i.length>0?($("#txtjobNo").val(t.job_code),$("#txtPR").val(t.PR_no),status==2?($("#txtCSTNo").val(t.cost_sheet_code),$("#lblCSTNo").hide()):($("#txtCSTNo").hide(),$("#lblCSTNo").html(t.cost_sheet_code==null?"N/A":"<a onClick=\"RefLinkCreate(2, '"+t.cost_sheet_code+'\')" style="cursor:pointer;color:#0089ff;font-weight: bold;text-decoration: underline;">'+t.cost_sheet_code+"<\/a> "),$("#lblCSTNo").show()),status==4?($("#txtFB").val(t.fb_code),$("#lblFB").hide()):($("#txtFB").hide(),$("#lblFB").html(t.fb_code==null?"N/A":"<a onClick=\"RefLinkCreate(4,'"+t.fb_code+'\')"style="cursor:pointer;color:#0089ff;font-weight: bold;text-decoration: underline;">'+t.fb_code+"<\/a> "),$("#lblFB").show()),status==5?($("#txtBlock").val(t.block_code),$("#lblBlock").hide()):($("#txtBlock").hide(),$("#lblBlock").html(t.block_code==null?"N/A":"<a onClick=\"RefLinkCreate(5,'"+t.block_code+'\')"style="cursor:pointer;color:#0089ff;font-weight: bold;text-decoration: underline;">'+t.block_code+"<\/a> "),$("#lblBlock").show()),$("#txtYarnBK").val(t.yarn_booking),$("#txtAcsrBK").val(t.accessories_booking),$("#txtOrder").val(t.buyer_order_code),$("#txtPO").val(t.po_no),$("#txtItems").val(t.Items),$("#txtStyle").val(t.style),$("#txtjobNo").attr("title",t.job_code),$("#txtCSTNo").attr("title",t.cost_sheet_code),$("#txtPR").attr("title",t.PR_no),$("#txtFB").attr("title",t.fb_code),$("#txtBlock").attr("title",t.block_code),$("#txtYarnBK").attr("title",t.yarn_booking),$("#txtAcsrBK").attr("title",t.accessories_booking),$("#txtOrder").attr("title",t.buyer_order_code),$("#txtPO").attr("title",t.po_no),$("#txtItems").attr("title",t.Items),$("#txtStyle").attr("title",t.style)):popupNotification.show("Invlid search code or data not found","warning")},error:function(){unblockUI();alert("An error has occurred while tracking  reference.")}})),!0}function RefLinkCreate(n,t){var r="",i="",u,f;switch(n){case 2:r="rptCostingSheet.aspx";i=37;break;case 4:r="rptFabricBooking.aspx";i=63;break;case 5:r="rptMasterBlockOrder.aspx";i=45;break;default:r="";i=-1}u=t.split(",");f={DocCode:u[0],DocBaseID:i};blockUI();$.ajax({url:bUrl+"/ExternalModuleCall/GetRptMaxVersion",type:"POST",dataType:"json",data:JSON.stringify(f),contentType:"application/json",success:function(n){var t,f;unblockUI();t=JSON.parse(n);console.log(t);t!=null?t.DocBaseID!="63"?(f="ApprovalSystem/htmlReport/"+r+"?clientAgent=Web&userId=0&docBaseId="+i+"&docCode="+u[0]+"&docVersion="+t.MaxVersion,window.open(f)):LoadExternalModuleFabricBooking(t.DocBaseID,u[0],t.MaxVersion,"","",""):popupNotification.show("Report doest found in approval history","warning")},error:function(){unblockUI();alert("An error has occurred while tracking  reference.")}})}function LoadExternalModuleFabricBooking(n,t,i,r,u){var f={};f.MethodName="TokenAuthentication";f.redirectUrl=redirectUrl;f.moduleName=moduleName;f.DocType=n;f.DocCode=t;f.Version=i;f.Json=r;f.SubReportJson=u;$.ajax({url:bUrl+"/ExternalModuleCall/TokenAuthenticationFabricBooking",type:"POST",dataType:"json",data:JSON.stringify(f),contentType:"application/json",success:function(n){var t=JSON.parse(n),i=t.result.url+"/?token="+t.token+"&type=LiveReport";window.open(i,"_blank")},error:function(){alert("An error has occurred while loading module.")}})}function LoadExternalModule(n,t,i,r,u,f){var e={};e.MethodName="TokenAuthentication";e.redirectUrl=redirectUrl;e.moduleName=moduleName;e.DocType=n;e.DocCode=t;e.Version=i;e.Json=r;e.SubReportJson=u;$.ajax({url:bUrl+"/ExternalModuleCall/TokenAuthentication",type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(n){var t=JSON.parse(n),i="";i=f=="Notify"?t.result.url+"/?token="+t.token+"&type=Notify":t.result.url+"/?token="+t.token;window.open(i,"_blank")},error:function(){alert("An error has occurred while loading module.")}})}function CallApprovalModule(n){LoadExternalModule("","","","","",n)}function AddPrefix(n,t){var r=0,i="",s="",u="",f=!1,e=t,o;t=t.toString();switch(n){case 1:u="Job Code";i="J";f=t.toUpperCase().includes(i);r=10;o=t.split("(");t=o[0];o.length==2&&(s=o[1].toUpperCase());break;case 2:u="Cost Sheet";i="CST";f=t.toUpperCase().includes(i);r=8;break;case 3:u="Purchase Requisition";i="PR";f=t.toUpperCase().includes(i);r=6;break;case 4:u="Fabric Booking";i="FB";f=t.toUpperCase().includes(i);r=6;break;case 5:u="Block Order";i="BL";f=t.toUpperCase().includes(i);r=7;break;case 6:u="Yarn Booking";i="BK";f=t.toUpperCase().includes(i);r=8;break;case 7:u="Accessories Booking";i="BK";f=t.toUpperCase().includes(i);r=8;break;case 8:u="Buyer Order";i="B";f=t.toUpperCase().includes(i);r=7;break;case 9:u="P D";i="PD";f=t.toUpperCase().includes(i);r=6;break;default:u="Type Not Found";i="";r=0}return f||(t=addZeros(t,r),e=i+t),s!=""&&(e=e+"("+s.toUpperCase()),e}function addZeros(n,t){return n=n.toString(),n.length<t?addZeros("0"+n,t):n}function FinancialYears(){var n=[{FinancialYearID:1,FinancialYear:PreviousYear-1+"/"+(CurrentYear-1)},{FinancialYearID:2,FinancialYear:PreviousYear+"/"+CurrentYear},{FinancialYearID:3,FinancialYear:PreviousYear+1+"/"+(CurrentYear+1)},{FinancialYearID:4,FinancialYear:PreviousYear+2+"/"+(CurrentYear+2)},],t=$("#ddlyear").kendoDropDownList({dataSource:n,optionLabel:"Select Delivered...",dataTextField:"FinancialYear",dataValueField:"FinancialYearID",height:310}).data("kendoDropDownList")}function LoadTinData(){$("#txtEmpId").prop("readonly",!0);$("#txtEmpName").prop("readonly",!0);$("#txtDesignation").prop("readonly",!0);$("#txtCompany").prop("readonly",!0);$("#txtDepartment").prop("readonly",!0);$("#txtEmpId").val(result[0].empId);$("#txtEmpName").val(result[0].empName);$("#txtDesignation").val(result[0].designation);$("#txtCompany").val(result[0].company);$("#txtDepartment").val(result[0].department);$("#txtSection").val(result[0].section);$("#txtTINNo").val(result[0].tinId);result[0].FinancialYear==null||result[0].TaxesCircle==null||result[0].TaxesZone==null||result[0].ReturnDate==null||result[0].SerialNo==null?$("#tinInfo").hide():($("#tinInfo").show(),$("#Tingrid").kendoGrid({dataSource:result,columns:[{field:"FinancialYear",title:"Financial Year"},{field:"TaxesCircle",title:"Taxes Circle"},{field:"TaxesZone",title:"Taxes Zone"},{field:"ReturnDate",format:"{0: dd-MM-yyyy }",title:"Return Date"},{field:"SerialNo",title:"Serial No"},{template:'<button onclick=\'EditTin("#: tinId #","#: SerialNo #","#: FinancialYear #")\' class=\'k-primary primaryTextButton\'>Edit<\/button>',field:"tinId",title:" ",width:55},]}))}function SaveTin(){var t={},n,r,i;if(t.empId=$("#txtEmpId").val()==""?popupNotification.show("Please Provide Employee ID","warning"):$("#txtEmpId").val(),t.tinId=$("#txtTINNo").val()==""?popupNotification.show("Please Provide TIN No","warning"):$("#txtTINNo").val(),t.note=$("#txtRemarks").val()==""?0:$("#txtRemarks").val(),$("#ddlyear").data("kendoDropDownList").text()=="Select Delivered..."){popupNotification.show("Enter Assesment Year","warning");return}if(t.year=$("#ddlyear").data("kendoDropDownList").text(),n={},$("#txtTaxesCircle").val()==""){popupNotification.show("Please Provide Taxes Circle","warning");return}if(n.TaxesCircle=$("#txtTaxesCircle").val(),$("#txtZone").val()==""){popupNotification.show("PPlease Provide Taxes Zone","warning");return}if(n.TaxesZone=$("#txtZone").val(),$("#txtDateofReturnIncome").val()==""){popupNotification.show("Please Provide Date of Return Submission","warning");return}if(n.ReturnDate=$("#txtDateofReturnIncome").val(),$("#txtSerialByAuthority").val()==""){popupNotification.show("Please Provide Return Serial","warning");return}n.SerialNo=$("#txtSerialByAuthority").val();r=$("#ddlyear").data("kendoDropDownList").text();n.FinancialYear=r;i=[];i.push(n);t.lstOfChildData=i;submit(t)}function submit(n){function t(n){var t=JSON.parse(n);popupNotification.show("Employee Tax Information Saved Successfully","success");$("#tbodyTin").empty();TinData()}function i(){popupNotification.show("Employee Tax Information Save Failed","error")}$.ajax({type:"POST",url:bUrl+"/Home/InsertUpdateTin",data:n,dataType:"json",success:t,error:i})}function EditTin(n,t,i){for(var r=0;r<result.length;r++)if(n==result[r].tinId&&t==result[r].SerialNo&&i==result[r].FinancialYear){var u=result[r].tinId,f=result[r].TaxesCircle,e=result[r].TaxesZone,o=result[r].ReturnDate,s=result[r].SerialNo,h=result[r].FinancialYear;$("#txtTINNo").val(u);$("#txtTaxesCircle").val(f);$("#txtZone").val(e);$("#txtDateofReturnIncome").val(o);$("#txtSerialByAuthority").val(s);$("#ddlyear").data("kendoDropDownList").text(h)}}function loadAlerts(){$(".msgSuccess").click(function(){popupNotification.show("Successfull","success")});$(".msgError").click(function(){popupNotification.show("Error! Try Again","error")});$(".msgWarning").click(function(){popupNotification.show("Warning! Check Again","warning")})}function Year(){CurrentYear=(new Date).getFullYear();PreviousYear=CurrentYear-1;NextYear=CurrentYear+1}var bUrl="",windowWidget,ip,url,TMSUrl,redirectUrl,moduleName,result,popupNotification,TinData;$(document).ready(function(){popupNotification=$("#popupNotification").kendoNotification().data("kendoNotification");$("#menu").kendoMenu();$(".KendotextButton").kendoButton();loadTextbox();loadDropdown();loadAlerts();$("#Loadwindow").kendoWindow({width:500,height:160,draggable:!1,content:{template:"Please Wait While Loading Data.."}});windowWidget=$("#Loadwindow").data("kendoWindow");loadBModal()});ip=location.host;url=ip.split(":");console.log(ip);TMSUrl="http://"+url[0]+":1155/DTMS/user/externallogin?";$(function(){loadLinks()});redirectUrl="Approval.aspx";moduleName="Approval System";$(function(){popupNotification=$("#popupNotification").kendoNotification().data("kendoNotification");$(".linkLabel").hide();$("#RefTracker").click(function(){$(".status").attr("disabled",!0);$(".status").css({cursor:"not-allowed",background:"rgb(231 231 231)"});$("#txtjobNo").attr("disabled",!1);$("#txtjobNo").css({cursor:"",background:""})});$("input[type=radio][name=rbdStatus]").change(function(){$(".status").attr("disabled",!0);$(".status").css({cursor:"not-allowed",background:"rgb(231 231 231)"});$(".status").val("");$(".status").show();$(".linkLabel").hide();var n=parseInt($("input[name=rbdStatus]:checked").val());switch(n){case 1:$("#txtjobNo").attr("disabled",!1).focus();$("#txtjobNo").css({cursor:"",background:""});break;case 2:$("#txtCSTNo").attr("disabled",!1).focus();$("#txtCSTNo").css({cursor:"",background:""});break;case 3:$("#txtPR").attr("disabled",!1).focus();$("#txtPR").css({cursor:"",background:""});break;case 4:$("#txtFB").attr("disabled",!1).focus();$("#txtFB").css({cursor:"",background:""});break;case 5:$("#txtBlock").attr("disabled",!1).focus();$("#txtBlock").css({cursor:"",background:""});break;case 6:$("#txtYarnBK").attr("disabled",!1).focus();$("#txtYarnBK").css({cursor:"",background:""});break;case 7:$("#txtAcsrBK").attr("disabled",!1).focus();$("#txtAcsrBK").css({cursor:"",background:""});break;case 8:$("#txtOrder").attr("disabled",!1).focus();$("#txtOrder").css({cursor:"",background:""});break;case 9:$("#txtPO").attr("disabled",!1).focus();$("#txtPO").css({cursor:"",background:""});break;default:$(".status").attr("disabled",!0)}});$(".status").keyup(function(n){n.which==13&&RefTracking()})});result=[];$(document).ready(function(){Year();FinancialYears();popupNotification=$("#popupNotification").kendoNotification().data("kendoNotification");loadAlerts();$(".primaryTextButton").kendoButton()});TinData=function(){$("#ddlyear").data("kendoDropDownList").value(0);$("#txtTaxesCircle").val("");$("#txtZone").val("");$("#txtDateofReturnIncome").val("");$("#txtSerialByAuthority").val("");$.ajax({type:"GET",url:bUrl+"/Home/GetTinData",success:function(n){result=JSON.parse(n);for(var t=0;t<result.length;t++)result[t].ReturnDate=new Date(result[t].ReturnDate).toLocaleDateString();LoadTinData()},error:function(){popupNotification.show("Error Occured While Loading TIN Data","error")}})};
//# sourceMappingURL=A_MainBundle.min.js.map
